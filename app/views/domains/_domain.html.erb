<tr>
  <td><%= domain.id %></td>
  <td>
    <% if check_domain_status domain %>
      <i class="glyphicon glyphicon-globe">
    <% else %>
      <i class="glyphicon glyphicon-lock">
    <% end %>
    <%= link_to domain.name, domain_path(domain) %>
    <a href="#" id="basic-nav-dropdown" data-toggle="dropdown"
      class="dropdown-toggle" role="button">
      <div>
        <span class="user-title">
          <b class="caret"></b>
        </span>
      </div>
    </a>
    <ul class="dropdown-menu" role="menu"
      aria-labelledby="basic-nav-dropdown">
      <% Domain.statuses.each do |key, value| %>
        <li role="presentation">
          <%= link_to domain_path(domain, status: key), method: :put do %>
            <% if value == Domain.statuses[:professed] %>
              <i class="glyphicon glyphicon-globe"></i>
              <span><%= t "professed" %></span>
            <% end %>
            <% if value == Domain.statuses[:secret]%>
              <i class="glyphicon glyphicon-lock"></i>
              <span><%= t "secret" %></span>
            <% end %>
          <% end %>
        </li>
        <li role="separator" class="divider"></li>
        <li role="separator" class="divider"></li>
      <% end %>
    </ul>
  </td>
  <td>
    <%= link_to "#{domain.users.size } " +
      t("manage_domain.edit_member"),
      user_domains_path(domain_id: domain.id, approved: :true) %>
  </td>
  <td>
    <%= link_to "#{domain.shop_domains.approved.size} " +
      t("manage_domain.edit_shop"),
      shop_domains_path(domain_id: domain.id, approved: :true) %>
  </td>
  <td><%= domain.products.size %></td>
  <td>
    <% unless domain.default? %>
      <% if domain.belong_to?(current_user.id) || domain.manage_by?(current_user) %>
        <strong>
          <%= link_to t("edit_member"),
            new_user_domain_path(domain_id: domain.id), method: :get %>
        </strong><br>
        <strong>
          <%= link_to shop_domains_path(domain_id: domain.id) do %>
            <%= t("shop_request") %>
            <%= domain.shop_domains.pending.size %>
          <% end %>
        </strong>
      <% else %>
        <%= link_to t("manage_domain.leave"),
          user_domain_path(find_user_domain(current_user.id, domain.id),
            user_id: current_user.id, domain_id: domain.id),
          method: :delete, class: "btn btn-danger btn_block" %>
      <% end %>
    <% end %>
  </td>
</tr>
